/* MathField (Input) Styling */
math-field {
    font-size: 1.25rem;
    background: transparent;
    outline: none;
    border: none;
    user-select: text;
    cursor: text;
    padding: var(--spacing-xs);
    color: inherit;
}

math-field::part(container) {
    outline: none;
}

/* Hide MathLive menu and keyboard buttons */
math-field::part(menu-toggle),
math-field::part(virtual-keyboard-toggle) {
    display: none !important;
}

/* ========== DARK MODE OVERRIDES ========== */
/* Override MathLive's internal colors for dark mode using design system variables */

:root[data-theme="dark"] math-field {
    /* Selection and Caret */
    --caret-color: var(--color-accent);
    /* Orange accent for caret */
    --selection-background-color: var(--bg-surface-active);
    /* Dark gray selection */
    --selection-color: var(--text-primary);
    /* Light text in selection */

    /* Primary/Accent Color */
    --primary: var(--color-accent);
    /* Orange accent */

    /* Placeholder Text */
    --placeholder-color: var(--text-tertiary);
    /* Tertiary text color */
    --placeholder-opacity: 0.5;

    /* Highlighted Elements (e.g., during editing) */
    --contains-highlight-background-color: var(--bg-surface-hover);
    /* Surface hover */
    --highlight-text: var(--color-accent);
    /* Orange accent for highlights */

    /* Smart Fence (auto-closing brackets, fractions) */
    --smart-fence-color: var(--color-accent);
    /* Orange for smart fences */
    --smart-fence-opacity: 0.7;

    /* LaTeX Mode */
    --latex-color: var(--text-secondary);
    /* Secondary text color for LaTeX */

    /* Correct/Incorrect States */
    --correct-color: var(--color-red-400);
    /* Green */
    --incorrect-color: var(--color-red-500);
    /* Red */
}

/* Virtual Keyboard Dark Mode Overrides */
:root[data-theme="dark"] {
    /* Keyboard Colors */
    --keyboard-accent-color: var(--color-accent);
    /* Orange accent */
    --keyboard-zindex: 1000;

    /* Toolbar */
    --keyboard-toolbar-text: var(--text-primary);
    /* Light text */
    --keyboard-toolbar-text-active: var(--color-white);
    /* White when active */
    --keyboard-toolbar-background: var(--bg-surface);
    /* Dark surface */
    --keyboard-toolbar-background-hover: var(--bg-surface-hover);
    /* Hover state */
    --keyboard-toolbar-background-selected: var(--bg-surface-active);
    /* Selected state */

    /* Keycaps */
    --keycap-background: var(--bg-surface);
    /* Dark surface */
    --keycap-background-hover: var(--bg-surface-hover);
    /* Hover state */
    --keycap-background-active: var(--bg-surface-active);
    /* Active state */
    --keycap-background-pressed: var(--color-slate-950);
    /* Pressed state (darker) */
    --keycap-border: var(--border-base);
    /* Border color */
    --keycap-border-bottom: var(--color-slate-400);
    /* Bottom border (slightly lighter) */

    /* Keycap Text */
    --keycap-text: var(--text-primary);
    /* Light text */
    --keycap-text-active: var(--color-white);
    /* White when active */
    --keycap-text-hover: var(--color-white);
    /* White on hover */
    --keycap-text-pressed: var(--text-primary);
    /* Light when pressed */
    --keycap-shift-text: var(--text-secondary);
    /* Secondary text for shift keys */

    /* Autocomplete/Suggestion Popover */
    --suggestion-zindex: 1000;
}

/* Additional Shadow DOM Part Overrides */
:root[data-theme="dark"] math-field::part(content) {
    color: var(--text-primary);
    background: transparent;
}

:root[data-theme="dark"] math-field::part(container) {
    background: transparent;
}